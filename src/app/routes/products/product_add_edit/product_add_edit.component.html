<mat-card *ngIf="!checkForm">
  <mat-card-title>Thêm mới sản phẩm</mat-card-title>

  <form [formGroup]="addProductForm">
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            matInput
            placeholder="Tên sản phẩm"
            formControlName="productName"
            name="productName"
          />
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            type="number"
            matInput
            placeholder="Giá sản phẩm"
            formControlName="unitPrice"
            name="unitPrice"
          />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="building">
            <mat-option *ngFor="let item of listBuildings" [value]="item.id">
              {{ item.buildingName }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="story">
            <mat-option *ngFor="let item of listStories" [value]="item.id">
              {{ item.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="category">
            <mat-option *ngFor="let item of listCategory" [value]="item.id">
              {{ item.categoryName }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            matInput
            type="number"
            placeholder="Giảm giá"
            formControlName="discount"
            name="discount"
          />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select formControlName="isActive" placeholder="Trạng thái">
            <mat-option *ngFor="let item of isActive" [value]="item"> {{ item }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field class="m-r-8">
          <input
                 matInput
                 type="number"
                 placeholder="Số lượng"
                 formControlName="quantity"
                 name="quantity"/>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
                 matInput
                 placeholder="Mô tả"
                 formControlName="description"
                 name="description" />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <input
          type="file"
          #fileInput
          accept="image/*"
          formControlName="productImage"
          multiple
          (change)="onChangeFileInput($event)"
          class="custom-file-upload"
        />
        <span style="color: red; font-size: small; position: relative; top: 10px" *ngIf="showImage"
          >Chọn ảnh sản phẩm</span
        >
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <img
        *ngFor="let item of arrImageSrc"
        id="blah"
        [src]="item"
        width="100"
        height="100"
        style="margin-top: 3%"
      />
    </div>

    <div fxLayout="row wrap" class="matero-row" style="margin-top: 3%">
      <div fxFlex="66.67" fxFlex.lt-sm="100" class="matero-col"></div>
      <button
        mat-raised-button
        color="primary"
        (click)="onSave()"
        [disabled]="addProductForm.invalid"
      >
        Lưu
      </button>
      <button mat-raised-button color="primary" (click)="onClose()" style="margin-left: 2%">
        Đóng
      </button>
    </div>
  </form>
</mat-card>

<mat-card *ngIf="checkForm">
  <mat-card-title>Cập nhật sản phẩm</mat-card-title>

  <form [formGroup]="addProductForm">
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            matInput
            placeholder="Tên sản phẩm"
            formControlName="productName"
            name="productName"
          />
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            matInput
            placeholder="Giá sản phẩm"
            formControlName="unitPrice"
            name="unitPrice"
            type="number"
          />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="building">
            <mat-option *ngFor="let item of listBuildings" [value]="item.id">
              {{ item.buildingName }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="story">
            <mat-option *ngFor="let item of listStories" [value]="item.id">
              {{ item.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select required formControlName="category">
            <mat-option *ngFor="let item of listCategory" [value]="item.id">
              {{ item.categoryName }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
            matInput
            type="number"
            placeholder="Giảm giá"
            formControlName="discount"
            name="discount"
          />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field>
          <mat-select formControlName="isActive" placeholder="Trạng thái">
            <mat-option *ngFor="let item of isActive" [value]="item"> {{ item }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100">
        <mat-form-field class="m-r-8">
          <input
                 matInput
                 type="number"
                 placeholder="Số lượng"
                 formControlName="quantity"
                 name="quantity"/>
        </mat-form-field>
      </div>
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field class="m-r-8">
          <input
                 matInput
                 placeholder="Mô tả"
                 formControlName="description"
                 name="description" />
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="50" fxFlex.lt-sm="100" class="matero-col">
        <input
          type="file"
          #fileInput
          accept="image/*"
          multiple
          formControlName="productImage"
          (change)="onChangeFileInput($event)"
          class="custom-file-upload"
        />
        <span style="color: red; font-size: small; position: relative; top: 10px" *ngIf="showImage"
          >Chọn ảnh sản phẩm</span
        >
      </div>
    </div>
    <div fxLayout="row wrap" class="matero-row" *ngIf="!showImage">
      <img
        *ngFor="let item of arrImageSrc"
        id="blah"
        [src]="item"
        width="100"
        height="100"
        style="margin-top: 3%; margin-right: 1%"
      />
    </div>
    <div fxLayout="row wrap" class="matero-row" *ngIf="showImage">
      <img
        *ngFor="let item of productImageBase64"
        [src]="item"
        width="100"
        height="100"
        style="margin-top: 3%; margin-right: 1%"
      />
    </div>

    <div fxLayout="row wrap" class="matero-row" style="margin-top: 1%">
      <div fxFlex="66.67" fxFlex.lt-sm="100" class="matero-col"></div>
      <button
        mat-raised-button
        color="primary"
        (click)="onSaveEdit()"
        [disabled]="addProductForm.invalid"
      >
        Lưu
      </button>
      <button mat-raised-button color="primary" (click)="onClose()" style="margin-left: 1%">
        Đóng
      </button>
    </div>
  </form>
</mat-card>
